{% extends "base.html" %}
{% load humanize %}
<!-- This sets the page title in base.html -->
{% block title %}EVE Waitlist - Home{% endblock %}

<!-- These styles are specific to the homepage -->
{% block styles %}
<style>
    .container {
        text-align: center;
        /* We add padding to account for the fixed header */
        padding-top: 40px;
    }

    .login-btn {
        display: inline-block;
        padding: 15px 30px;
        margin-top: 20px;
        background-color: #3b5998;
        color: #fff;
        text-decoration: none;
        font-size: 1.2em;
        font-weight: bold;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

        .login-btn:hover {
            background-color: #4e71bb;
        }

    /* --- All other styles removed as they are no longer needed --- */

</style>
{% endblock %}


<!-- This content is injected into base.html's content block -->
{% block content %}
<div class="container">
    <h1>EVE Online Waitlist</h1>

    {% if user.is_authenticated %}

    <!-- This page is now just a landing zone, the user will be -->
    <!-- redirected to the waitlist view by the logic in waitlist/views.py -->
    <!-- If they land here, something is likely misconfigured, -->
    <!-- but we can give them a link. -->
    <p>Welcome, <strong>{{ user.first_name }}</strong>!</p>
    <p>Loading waitlist...</p>
    <script>// This script will redirect if the view logic fails
        window.location.href = "{% url 'waitlist:home' %}";</script>

    {% else %}
    <!-- Show this if the user is NOT logged in -->
    <p>Please log in with EVE SSO to join the waitlist.</p>

    <a href="{% url 'esi_auth:login' %}" class="login-btn">
        Log In with EVE Online
    </a>
    {% endif %}
</div>
{% endblock %}